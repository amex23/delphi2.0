{% paginate search.results by 10 %}
 <section class="h-[80vh] flex-col flex gap-12 justify-center items-center px-12">
	<div class="flex flex-col items-center justify-center relative">

			<form action="/search" method="get" role="search" class="flex justify-center items-center gap-2">
				<input type="search" name="q" class="py-2.5 btn" value="{{ search.terms | escape }}" id="search-input">
				<ul class="search-results" id="search-results">
			      {% for item in search.results %}
			        <li>
			          <a href="{{ item.url }}">
			            {{ item.title | escape }}
			          </a>
			        </li>
			      {% endfor %}
			    </ul>
				<button type="submit" class="bg-[black] text-white px-5 py-3">Search</button>
			</form>

			  {% comment %} <div class="bg-red-400">
				
				{% comment %} <input type="text" id="myInput" onfocus="showDropdown()"> {% endcomment %}
				<input type="search" name="q" class="py-2.5 btn" value="{{ search.terms | escape }}" id="myInput" onfocus="showDropdown()">
				
				<div id="myDropdown" class="dropdown-container">
					{% if search.performed %}
						{% for item in search.results %}
						  {% if item.featured_image %}
							<a href="{{ item.url | within: collection }}" title="{{ item.title | escape }}">
							  {{ item.featured_image.src | img_url: 'medium' | img_tag: item.featured_image.alt }}
							</a>
						  {% endif %}
						  <h5>{{ item.title | link_to: item.url }}</h5>
						  <p>{{ item.content | strip_html | truncatewords: 50 }}</p>
						{% else %}
						  no results
						{% endfor %}
					  {% endif %}
				</div>

			
			  </div> {% endcomment %}

			  <input type="text" id="search-input" placeholder="Type to search...">
				<div id="search-results">
				  {% if search_results %}
				    <ul>
				      {% for product in search_results %}
				        <li>{{ product.title }}</li>
				      {% endfor %}
				    </ul>
				  {% endif %}
				</div>

	 </div>	
	
	  <div class="flex items-center justify-center gap-12">
		{% if search.performed %}
			{% for item in search.results %}
			  {% if item.featured_image %}
				<a href="{{ item.url | within: collection }}" title="{{ item.title | escape }}">
				  {{ item.featured_image.src | img_url: 'medium' | img_tag: item.featured_image.alt }}
				</a>
			  {% endif %}
			  <h5>{{ item.title | link_to: item.url }}</h5>
			  <p>{{ item.content | strip_html | truncatewords: 50 }}</p>
			{% else %}
			  no results
			{% endfor %}
		  {% endif %}
	  </div>

		  
	  
 </section>
  

  {% if paginate.pages > 1 %}{{ paginate | default_pagination }}{% endif %}
{% endpaginate %}


<style>
	 #search-input {
    width: 200px;
    padding: 10px;
  }

  #search-results {
    display: none;
    position: absolute;
    background-color: #fff;
    border: 1px solid #ccc;
    max-height: 150px;
    overflow-y: auto;
  }
</style>

{% comment %}
	<style>
	.btn {
		border: 2px solid gray;
	}

	.search-results {
	  display: none;
	  position: absolute;
	  background: #fff;
	  border: 1px solid #ccc;
	  max-height: 200px;
	  overflow-y: auto;
	}

	/* Style the list items within the search results dropdown */
	.search-results li {
	  padding: 5px;
	}

	/* Display search results when the input field is focused */
	#search-input:focus + .search-container .search-results {
	  display: block;
	}


	.dropdown-container {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }

  /* Styling for dropdown options */
  .dropdown-option {
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }

  /* Style the input field */
  input[type="text"] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
  }
</style>
{% endcomment %}

<script>
	document.getElementById('search-input').addEventListener('focus', function () {
	  document.getElementById('search-results').style.display = 'block';
	});

	document.getElementById('search-input').addEventListener('blur', function () {
	  document.getElementById('search-results').style.display = 'none';
	});

	document.getElementById('search-input').addEventListener('input', function () {
	  const searchTerm = this.value.trim().toLowerCase();
	  const searchResults = document.getElementById('search-results');

	  // Make an AJAX request to fetch Liquid code
	  $.ajax({
	    type: 'GET',
	    url: '/search?view=ajax_search_results&term=' + searchTerm, // Modify the URL to match your Shopify theme's Liquid endpoint
	    success: function (data) {
	      searchResults.innerHTML = data;
	    }
	  });
	});

</script>


{% comment %} <script>
	document.getElementById('search-input').addEventListener('blur', function() {
	  // Hide search results when the input field loses focus
	  document.getElementById('search-results').style.display = 'none';
	});

	function showDropdown() {
  // Get the dropdown container element
  var dropdown = document.getElementById("myDropdown");

  // Toggle the display of the dropdown on focus
  dropdown.style.display = "block";

  // Add a click event listener to the document
  document.addEventListener('click', function(event) {
    if (!event.target.matches('#myInput') && !event.target.matches('.dropdown-option')) {
      dropdown.style.display = "none";
    }
  });
}
</script> {% endcomment %}